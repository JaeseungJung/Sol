<!Doctype html>
<html>
<head>
<meta charset="UTF-8">


<title>Quiz Pang !</title>

<!-- Bootstrap CSS -->


<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css" 
rel="stylesheet" integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We" crossorigin="anonymous">

<script src="./lib/web3.min.js"></script>
<body>
  <nav class="navbar navbar-expand-lg navbar-dark bg-primary" id="header--box">
    <div class="container-fluid">
		<button
		  class="navbar-toggler"
		  type="button"
		  data-bs-toggle="collapse"
		  data-bs-target="#navbarColor01"
		  aria-controls="navbarColor01"
		  aria-expanded="false"
		  aria-label="Toggle navigation"
		>
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="container"></div>
      <div class="container"></div>
      <div class="container"></div>
      <div class="container"></div>
		<a class="navbar-brand" href="#"> <p id="main--text"> Quiz Pang ! 🧙</p> </a>

      <div class="container"></div>
      <div class="container"></div>
      <div class="container"></div>


      <div class="container">
    <button class="btn btn-secondary2"  onclick="init()">Connect Wallet 🦊</button>
      </div>
    </div>
  </nav>


  <div class="navbar navbar-expand-lg navbar-dark bg-primary">
    <div class="container">

    </div>

    <div class="container">
     
    </div>

    <div class="container">
      
    </div>
    <div class="container">
      
    </div>
  </div>

  

  <br>

  <div style="margin-left: 20px;">
  
  <!-- <div>
    <input type="text" id="contract_Input" placeholder="contract address"/>
    <button class="btn btn-secondary" onclick="getContract()">contract connect</button>
  </div> -->
  <br>
  <div>
    <input type="text" id="balanceOf_Input" placeholder="address"/>

    <button class="btn btn-secondary" onclick="balanceOf()">balance check</button>
    
  </div>
  <br>

  <div>
    <input type="text" id="transfer_R_Add" placeholder="receiver address"/>
    <input type="text" id="transfer_Amount" placeholder="token amount"/>

    <button class="btn btn-secondary" onclick="transfer()">transfer </button>

  </div>
  <div>
    <label> [MESSAGE] </label>
    <div id="account"></div>
<br>
    <div style="margin-left: 20px;">
    <div id="contract"></div>
    <div id="token_name"></div>
    <div id="token_symbol"></div>

    <div id="totalSupply_Data"></div>
  </div>
    <div style="margin-left: 30px;" id="balance"></div>
  </div>
  <br>
</div>
  <div style="margin-left: 40px;" id="eventResult"></div>
</div>


</div>

<div class="container2">
	<div class="item" ><div class="card align-items-lg-center">
		<img src="https://blog.kakaocdn.net/dn/8jiCS/btqOt06sE8i/mnjbapfYCBF1oMm9DFDHbK/img.jpg" class="card-img-top-sq" alt="...">
		<div class="card-body">
		  <h5 class="card-title">포켓몬</h5>
		  <p class="card-text">위 포켓몬 이름은 뭘까요? </p>
		  <div class="input-group mb-3">
			<input type="text" id="answer--input--01" class="form-control" placeholder="정답을 입력하세요." aria-label="Recipient's username" aria-describedby="answer--button--01">
			<button class="btn btn-secondary" type="button" id="answer--button--01" onclick="submit_Answer()">submit</button>
		  </div>
		</div>
	  </div>
		</div> 
	<div class="item" ><div class="card align-items-lg-center">
		<img src="https://academy.aaxspace.com/wp-content/uploads/2020/06/Screenshot-2020-06-04-at-10.00.05-PM-898x500.png" class="card-img-top" alt="...">
		<div class="card-body">
		  <h5 class="card-title">이더리움</h5>
		  <p class="card-text">이더리움 2.0이 되면 POW => ㅁㅁㅁ 방식으로 전환된다.  </p>
		  <div class="input-group mb-3">
			<input type="text" class="form-control" placeholder="정답을 입력하세요." aria-label="Recipient's username" aria-describedby="button-addon2">
			<button class="btn btn-secondary" type="button" id="button-addon2">submit</button>
		  </div>
		</div>
	  </div>
		</div> 
	<div class="item" ><div class="card align-items-lg-center">
		<img src="http://www.coindeskkorea.com/news/photo/201911/20191108_1_60801.png" class="card-img-top" alt="...">
		<div class="card-body">
		  <h5 class="card-title">NFT 게임</h5>
		  <p class="card-text">크립토키티를 벤치마킹하여 엑시를 키우는 NFT 게임의 이름은? </p>
		  <div class="input-group mb-3">
			<input type="text" class="form-control" placeholder="정답을 입력하세요." aria-label="Recipient's username" aria-describedby="button-addon2">
			<button class="btn btn-secondary" type="button" id="button-addon2">submit</button>
		  </div>
		</div>
	  </div>
		</div> 
	<div class="item" ><div class="card align-items-lg-center">
		<img src="https://blog.kakaocdn.net/dn/8jiCS/btqOt06sE8i/mnjbapfYCBF1oMm9DFDHbK/img.jpg" class="card-img-top" alt="...">
		<div class="card-body">
		  <h5 class="card-title">포켓몬</h5>
		  <p class="card-text">위 포켓몬 이름은 뭘까요? </p>
		  <div class="input-group mb-3">
			<input type="text" class="form-control" placeholder="정답을 입력하세요." aria-label="Recipient's username" aria-describedby="button-addon2">
			<button class="btn btn-secondary" type="button" id="button-addon2">submit</button>
		  </div>
		</div>
	  </div>
		</div> 
	<div class="item" ><div class="card align-items-lg-center">
		<img src="https://blog.kakaocdn.net/dn/8jiCS/btqOt06sE8i/mnjbapfYCBF1oMm9DFDHbK/img.jpg" class="card-img-top" alt="...">
		<div class="card-body">
		  <h5 class="card-title">포켓몬</h5>
		  <p class="card-text">위 포켓몬 이름은 뭘까요? </p>
		  <div class="input-group mb-3">
			<input type="text" class="form-control" placeholder="정답을 입력하세요." aria-label="Recipient's username" aria-describedby="button-addon2">
			<button class="btn btn-secondary" type="button" id="button-addon2">submit</button>
		  </div>
		</div>
	  </div>
		</div> 
	<div class="item" ><div class="card align-items-lg-center">
		<img src="https://blog.kakaocdn.net/dn/8jiCS/btqOt06sE8i/mnjbapfYCBF1oMm9DFDHbK/img.jpg" class="card-img-top" alt="...">
		<div class="card-body">
		  <h5 class="card-title">포켓몬</h5>
		  <p class="card-text">위 포켓몬 이름은 뭘까요? </p>
		  <div class="input-group mb-3">
			<input type="text" class="form-control" placeholder="정답을 입력하세요." aria-label="Recipient's username" aria-describedby="button-addon2">
			<button class="btn btn-secondary" type="button" id="button-addon2">submit</button>
		  </div>
		</div>
	  </div>
		</div> 
	<div class="item" ><div class="card align-items-lg-center">
		<img src="https://blog.kakaocdn.net/dn/8jiCS/btqOt06sE8i/mnjbapfYCBF1oMm9DFDHbK/img.jpg" class="card-img-top" alt="...">
		<div class="card-body">
		  <h5 class="card-title">포켓몬</h5>
		  <p class="card-text">위 포켓몬 이름은 뭘까요? </p>
		  <div class="input-group mb-3">
			<input type="text" class="form-control" placeholder="정답을 입력하세요." aria-label="Recipient's username" aria-describedby="button-addon2">
			<button class="btn btn-secondary" type="button" id="button-addon2">submit</button>
		  </div>
		</div>
	  </div>
		</div> 
	<div class="item" ><div class="card align-items-lg-center">
		<img src="https://blog.kakaocdn.net/dn/8jiCS/btqOt06sE8i/mnjbapfYCBF1oMm9DFDHbK/img.jpg" class="card-img-top" alt="...">
		<div class="card-body">
		  <h5 class="card-title">포켓몬</h5>
		  <p class="card-text">위 포켓몬 이름은 뭘까요? </p>
		  <div class="input-group mb-3">
			<input type="text" class="form-control" placeholder="정답을 입력하세요." aria-label="Recipient's username" aria-describedby="button-addon2">
			<button class="btn btn-secondary" type="button" id="button-addon2">submit</button>
		  </div>
		</div>
	  </div>
		</div> 
	<div class="item" ><div class="card align-items-lg-center">
		<img src="https://blog.kakaocdn.net/dn/8jiCS/btqOt06sE8i/mnjbapfYCBF1oMm9DFDHbK/img.jpg" class="card-img-top" alt="...">
		<div class="card-body">
		  <h5 class="card-title">포켓몬</h5>
		  <p class="card-text">위 포켓몬 이름은 뭘까요? </p>
		  <div class="input-group mb-3">
			<input type="text" class="form-control" placeholder="정답을 입력하세요." aria-label="Recipient's username" aria-describedby="button-addon2">
			<button class="btn btn-secondary" type="button" id="button-addon2">submit</button>
		  </div>
		</div>
	  </div>
		</div> 

	

</div>

</body>

<script type="text/javascript">

  let provider;
  let web3;
  let account;
  let contract;

 async function init() {

  if (window.ethereum) {
      web3 = new Web3(window.ethereum);
      try {
        // Request account access if needed
        await window.ethereum.enable();
        // Acccounts now exposed
        web3.eth.getAccounts().then(function(accounts){
          account = accounts[0]
          document.getElementById("account").innerText = "Connected Account Address: " + account
        })
      } catch (error) {
      }
    }
    // Legacy dapp browsers...
    else if (window.web3) {
      // Use Mist/MetaMask's provider.
      web3 = window.web3;
      console.log("Injected web3 detected.");
    }
  }
  
  function getContract() {
    let abi =[
	{
		"inputs": [
			{
				"internalType": "uint256",
				"name": "total",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "constructor"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"internalType": "address",
				"name": "tokenOwner",
				"type": "address"
			},
			{
				"indexed": true,
				"internalType": "address",
				"name": "spender",
				"type": "address"
			},
			{
				"indexed": false,
				"internalType": "uint256",
				"name": "tokens",
				"type": "uint256"
			}
		],
		"name": "Approval",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"internalType": "address",
				"name": "from",
				"type": "address"
			},
			{
				"indexed": true,
				"internalType": "address",
				"name": "to",
				"type": "address"
			},
			{
				"indexed": false,
				"internalType": "uint256",
				"name": "tokens",
				"type": "uint256"
			}
		],
		"name": "Transfer",
		"type": "event"
	},
	{
		"constant": true,
		"inputs": [
			{
				"internalType": "address",
				"name": "owner",
				"type": "address"
			},
			{
				"internalType": "address",
				"name": "delegate",
				"type": "address"
			}
		],
		"name": "allowance",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"internalType": "address",
				"name": "delegate",
				"type": "address"
			},
			{
				"internalType": "uint256",
				"name": "numTokens",
				"type": "uint256"
			}
		],
		"name": "approve",
		"outputs": [
			{
				"internalType": "bool",
				"name": "",
				"type": "bool"
			}
		],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [
			{
				"internalType": "address",
				"name": "tokenOwner",
				"type": "address"
			}
		],
		"name": "balanceOf",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "decimals",
		"outputs": [
			{
				"internalType": "uint8",
				"name": "",
				"type": "uint8"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "name",
		"outputs": [
			{
				"internalType": "string",
				"name": "",
				"type": "string"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "symbol",
		"outputs": [
			{
				"internalType": "string",
				"name": "",
				"type": "string"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "totalSupply",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"internalType": "address",
				"name": "receiver",
				"type": "address"
			},
			{
				"internalType": "uint256",
				"name": "numTokens",
				"type": "uint256"
			}
		],
		"name": "transfer",
		"outputs": [
			{
				"internalType": "bool",
				"name": "",
				"type": "bool"
			}
		],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"internalType": "address",
				"name": "owner",
				"type": "address"
			},
			{
				"internalType": "address",
				"name": "buyer",
				"type": "address"
			},
			{
				"internalType": "uint256",
				"name": "numTokens",
				"type": "uint256"
			}
		],
		"name": "transferFrom",
		"outputs": [
			{
				"internalType": "bool",
				"name": "",
				"type": "bool"
			}
		],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	}
]

    var connected_Contract = document.getElementById("contract_Input").value
    contract = new web3.eth.Contract(abi, connected_Contract)
    document.getElementById("contract").innerText = "Token Contract: "+ contract._address
    // console.log(contract)

    contract.methods.totalSupply().call()
    .then(function(result){
      document.getElementById("totalSupply_Data").innerText ="total Supply: " + result
    });

   
    get_TokenInfo ()

    yourBalanceOf()


    // listen event
    // contract.events.SetName({}, function(error, event){ 
    //   console.log(event)
    //   document.getElementById("eventResult").innerText = event.returnValues.name+", "+event.returnValues.sender
    // })
    // document.getElementById("eventResult").innerText = "Listening..."
  }
   
  function balanceOf(){
    let account_bal = document.getElementById("balanceOf_Input").value
    
    contract.methods.balanceOf(account_bal).call()
    .then(function(result){
      document.getElementById("balance").innerText =  account_bal + "'s balance is "+ result
    });
  }
  
  async function get_TokenInfo (){
    let tokenName = await contract.methods.name().call();
    let tokenSymbol = await contract.methods.symbol().call();

      document.getElementById("token_name").innerText = "Token Name: " + tokenName
      document.getElementById("token_symbol").innerText = "Token Symbol: " + tokenSymbol

      
  }

  function yourBalanceOf(){
    web3.eth.getAccounts().then(function(accounts){
          account = accounts[0]
          // console.log(account)
          document.getElementById("account").innerHTML = 
          "Connected Account Address: " + account
        })
          
    
    contract.methods.balanceOf(account).call()
    .then(function(result){
      document.getElementById("balance").innerText =  "your balance is "+ result
    });
  }

  function totalSupply(){
    
    contract.methods.totalSupply().call()
    .then(function(result){
      document.getElementById("totalSupply_Data").innerText ="total Supply: " + result
    });
  }
  
  function transfer() {
    let reciverAddress = document.getElementById("transfer_R_Add").value
    let transferAmount= document.getElementById("transfer_Amount").value

    contract.methods.transfer(reciverAddress,transferAmount).send(
      {from: account}
    ).then(function(receipt){
    document.getElementById("eventResult").innerText = reciverAddress + "에게"  + " 토큰 " + transferAmount + "개 전송 완료."

    }).on('error', function(){
      
    })
  
  }


  // 퀴즈팡 함수들


  function submit_Answer() {
	  let abi =[
	{
		"inputs": [
			{
				"internalType": "uint256",
				"name": "total",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "constructor"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"internalType": "address",
				"name": "tokenOwner",
				"type": "address"
			},
			{
				"indexed": true,
				"internalType": "address",
				"name": "spender",
				"type": "address"
			},
			{
				"indexed": false,
				"internalType": "uint256",
				"name": "tokens",
				"type": "uint256"
			}
		],
		"name": "Approval",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"internalType": "address",
				"name": "from",
				"type": "address"
			},
			{
				"indexed": true,
				"internalType": "address",
				"name": "to",
				"type": "address"
			},
			{
				"indexed": false,
				"internalType": "uint256",
				"name": "tokens",
				"type": "uint256"
			}
		],
		"name": "Transfer",
		"type": "event"
	},
	{
		"constant": true,
		"inputs": [
			{
				"internalType": "address",
				"name": "owner",
				"type": "address"
			},
			{
				"internalType": "address",
				"name": "delegate",
				"type": "address"
			}
		],
		"name": "allowance",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"internalType": "address",
				"name": "delegate",
				"type": "address"
			},
			{
				"internalType": "uint256",
				"name": "numTokens",
				"type": "uint256"
			}
		],
		"name": "approve",
		"outputs": [
			{
				"internalType": "bool",
				"name": "",
				"type": "bool"
			}
		],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [
			{
				"internalType": "address",
				"name": "tokenOwner",
				"type": "address"
			}
		],
		"name": "balanceOf",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "decimals",
		"outputs": [
			{
				"internalType": "uint8",
				"name": "",
				"type": "uint8"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "name",
		"outputs": [
			{
				"internalType": "string",
				"name": "",
				"type": "string"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "symbol",
		"outputs": [
			{
				"internalType": "string",
				"name": "",
				"type": "string"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "totalSupply",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"internalType": "address",
				"name": "receiver",
				"type": "address"
			},
			{
				"internalType": "uint256",
				"name": "numTokens",
				"type": "uint256"
			}
		],
		"name": "transfer",
		"outputs": [
			{
				"internalType": "bool",
				"name": "",
				"type": "bool"
			}
		],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"internalType": "address",
				"name": "owner",
				"type": "address"
			},
			{
				"internalType": "address",
				"name": "buyer",
				"type": "address"
			},
			{
				"internalType": "uint256",
				"name": "numTokens",
				"type": "uint256"
			}
		],
		"name": "transferFrom",
		"outputs": [
			{
				"internalType": "bool",
				"name": "",
				"type": "bool"
			}
		],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	}
]

    var connected_Contract = document.getElementById("contract_Input").value
    contract = new web3.eth.Contract(abi, connected_Contract)
    document.getElementById("contract").innerText = "Token Contract: "+ contract._address
    // console.log(contract)

    contract.methods.totalSupply().call()
    .then(function(result){
      document.getElementById("totalSupply_Data").innerText ="total Supply: " + result
    });
    let input01 = document.getElementById("answer--input--01").value

   
  }
  

</script>

<style>
	.container2 {
	padding: auto;
	display: grid;
	margin: 0 5%;
	/* grid-template-columns: 200px 200px 500px; */
	grid-template-columns: 1fr 1fr 1fr;
	/* grid-template-columns: repeat(3, 1fr) */
	/* grid-template-columns: 200px 1fr */
	/* grid-template-columns: 100px 200px auto */

	grid-template-rows: 400px 400px 400px;
	/* grid-template-rows: 1fr 1fr 1fr; */
	/* grid-template-rows: repeat(3, 1fr) */
	/* grid-template-rows: 200px 1fr */
	/* grid-template-rows: 100px 200px auto */
}

.btn-secondary {
     border-radius: 16px;
	 background-color: #7C83FD;
	 border: none;
	 box-shadow: 3px 3px 3px;
    }

.btn-secondary2{
     border-radius: 16px;
	 background-color: #B5EAEA;
	 border: none;
	 box-shadow: 3px 3px 3px;
}

    body {
    padding-top: 0px;
}

body {

	background-color: white;
}

.bg-primary
{
	background-color: #7C83FD !important;

}

.card-img-top {
max-width: 300px	!important;
align-content: center;
border-radius: 12px;

}

.card-img-top-sq {
max-width: 150px	!important;
align-content: center;
border-radius: 12px;
}

.card {
	padding: 10px 10px;
	border-radius: 12px;
	max-width: 500px;
    box-shadow: 0 0 10px rgb(68 217 232 / 70%), 0 0 30px rgb(68 217 232 / 15%), 0 0 1rem rgb(68 217 232 / 30%), 0 0 4rem rgb(68 217 232 / 10%) !important;
}

.item {
	margin-right: 5%;
}

#main--text{
	font-size: 32pt;
	text-shadow: 0 0 2px rgb(255 255 255 / 60%), 0 0 3px rgb(255 255 255 / 50%), 0 0 0.5rem rgb(255 255 255 / 30%), 0 0 2rem rgb(255 255 255 / 20%);
	

}



</style>
</html>